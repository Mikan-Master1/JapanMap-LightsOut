<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>日本地図でライツアウト</title>
    <link rel="stylesheet" type="text/css" href="kanto.css">
</head>
<body>
    <header>
        <h1>日本地図でライツアウト</h1>
        <div id="timer">残り時間: <span id="countdown">100</span>秒</div>
    </header>
    <main>
        <div class="sub-main">
            <div class="play-ground">
                <div class="map-container">
                    <svg
                    xmlns:mapsvg="http://mapsvg.com"
                    xmlns:dc="http://purl.org/dc/elements/1.1/"
                    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
                    xmlns:svg="http://www.w3.org/2000/svg"
                    xmlns="http://www.w3.org/2000/svg"
                    mapsvg:geoViewBox="123.658963 45.523885 145.820743 24.217586"
                    viewBox="270 215 437.33432 516.01587"
                    width="2700"
                    height="2700">                  
                    <path class="todouhuken"
                        d="m 333.51993,240.30889 -0.1,2.12 0.89,3.27 2.68,5.5 1.63,2.49 0.82,0.47 0.04,0.45 0,0 -2.5,-1.54 -1.11,-1.53 -1.23,-0.26 -1.13,-0.97 -0.91,0.04 -1.08,-0.52 -2.01,0.52 -0.86,0.82 -0.8,-0.23 -0.59,0.4 -0.86,-0.11 -1.02,0.41 -0.58,-0.72 -2.46,-0.86 -1.04,-0.7 -0.2,-0.71 -0.72,-0.24 -1.63,-2.01 -0.33,-0.84 -0.42,-0.03 0,0 -0.39,0.35 -0.39,-0.1 -0.87,-1.96 0.17,-0.89 0,0 0.73,-0.06 1.65,-0.87 0.55,-1.69 1.13,0.28 0.12,-0.88 1,-0.47 0.13,-0.45 1.56,-0.08 0.26,-0.13 0.05,-0.52 0.67,0.24 0.41,-0.46 0.44,-0.02 0.28,0.39 0.67,-0.21 0.21,-1.17 0.92,-1.85 -0.02,-1.81 -0.57,-1.95 0.28,-0.38 0.95,-0.21 0.1,-0.31 -0.63,-1 0.22,-1.3 -0.28,-0.99 0.09,-1.99 0,0 0.55,0.03 0.76,1.02 0.82,0.25 0.33,1.16 1.14,0.42 0.43,0.57 1.46,-1.4 1.12,-0.49 -0.46,-1.3 0.34,-0.46 0.57,1.03 3.43,1.04 0,0 0.04,0.02 0,0 0.03,0.01 0,0 0.18,0.64 -0.63,0.17 -0.49,0.95 -1.18,4 -0.7,1.17 -0.78,2.27 0.16,2.88 -1.04,1.29 z"
                        title="Ibaraki"
                        id="JP-01" />
                    <path class="todouhuken"
                        d="m 327.45993,225.02889 -0.09,1.99 0.27,0.99 -0.22,1.3 0.62,1 -0.09,0.32 -0.95,0.21 -0.28,0.38 0.57,1.95 0.02,1.81 -0.92,1.86 -0.21,1.17 -0.67,0.2 -0.28,-0.39 -0.45,0.02 -0.41,0.47 -0.68,-0.24 -0.05,0.52 -0.26,0.13 -1.56,0.08 -0.13,0.45 -1,0.47 -0.12,0.88 -1.13,-0.28 -0.56,1.69 -1.64,0.87 -0.73,0.06 0,0 -0.84,-0.41 0,0 -0.51,-0.79 0.09,-0.28 -0.38,-0.24 -1.11,0.18 -0.71,-0.43 -1.01,0.29 -1.11,-0.97 0.04,-0.58 -1.05,-0.78 0.18,-0.96 1.19,-1.55 -0.33,-0.76 0.4,-1.2 0.82,-0.65 -0.34,-0.68 -1.23,0.07 -1.47,-0.74 0.18,-1.37 0.59,-0.89 -0.28,-1.17 1.02,-1.41 -1.02,-0.44 0.58,-1.54 0,0 0.94,-0.43 0.71,-1.02 1.35,-0.24 0.92,-0.75 0.63,-0.09 0.23,-0.43 0.79,-0.2 0.26,-0.41 2.8,-0.87 0.18,-0.91 1.36,-0.59 2.42,0.28 2.39,1 1.02,0.98 0.23,0.93 0.85,-0.05 -0.16,1.86 z"
                        title="Tochigi"
                        id="JP-02" />
                    <path class="todouhuken"
                        d="m 315.66993,242.52889 -0.31,0.58 -0.49,0.18 -0.52,-0.48 -2.54,0.48 -1.81,-1.34 -0.86,0.21 -0.97,-0.29 -0.6,0.15 -1.69,-0.86 -0.7,-0.05 -1.23,1.97 -0.02,0.93 -0.42,0.76 -1.53,0.07 -0.46,0.78 -1.52,0.4 -0.92,1.01 -1.23,0.02 -0.75,1.01 0,0 -0.36,0.09 -0.36,-0.52 -0.61,-0.19 -0.38,-1.77 0.33,-0.35 -0.28,-0.67 -0.65,-0.08 -0.44,-0.76 0.16,-0.17 0.46,0.33 0.45,-0.48 0.03,-0.81 -0.42,-0.44 -0.23,-1.11 1.03,-0.68 0.07,-1.48 -0.29,-1.15 -0.83,-0.25 -0.7,0.1 -0.44,0.4 -0.88,-0.25 -0.21,0.31 -0.43,-0.07 -1.25,-0.74 -0.06,-1.3 0.6,-1.66 -0.02,-0.99 0.96,-1.18 0.96,-0.16 0.01,-1.09 1.79,-0.36 1.55,-0.83 0,0 0.25,0.17 0.36,-0.63 1.2,0.44 0.79,-0.67 -0.1,-1 0.64,0.03 1.49,-0.62 -0.25,-0.44 0.29,-0.95 0.85,0.11 0.09,-0.26 -0.27,-1.93 1.64,-0.28 0.82,-0.73 0.12,-0.95 1.54,1.55 0.11,0.76 0.92,0.07 0.23,0.34 0,0 0.01,0.37 0.52,-0.2 2.3,0.71 0,0 -0.58,1.54 1.02,0.44 -1.02,1.41 0.28,1.17 -0.59,0.89 -0.18,1.37 1.47,0.74 1.23,-0.07 0.34,0.68 -0.82,0.65 -0.4,1.2 0.33,0.76 -1.19,1.55 -0.18,0.96 1.05,0.78 -0.04,0.58 1.11,0.97 1.01,-0.29 0.71,0.43 1.11,-0.18 0.38,0.24 -0.09,0.28 z"
                        title="Gunma"
                        id="JP-03" />
                    <path class="todouhuken"
                        d="m 297.31993,250.08889 0.2,-0.52 -0.52,-1.05 0.1,-0.46 0,0 0.75,-1.01 1.23,-0.02 0.92,-1.01 1.52,-0.4 0.46,-0.78 1.53,-0.07 0.42,-0.76 0.02,-0.93 1.23,-1.97 0.7,0.05 1.69,0.86 0.6,-0.15 0.97,0.29 0.86,-0.21 1.81,1.34 2.54,-0.48 0.52,0.48 0.49,-0.18 0.31,-0.58 0,0 0.84,0.41 0,0 -0.17,0.89 0.86,1.96 0.39,0.1 0.39,-0.35 0,0 0.71,1.4 0.06,1.04 1.67,3.22 -0.22,1.33 -0.35,0.27 0,0 -0.92,0.07 -0.17,-0.42 -0.52,0.14 -0.45,-0.28 -0.41,0.74 -1.78,-0.31 -0.67,0.8 -0.55,-0.29 -0.91,0.37 -0.28,-0.87 -1.59,0.75 -1.25,0.03 -0.53,-0.6 -0.78,-0.15 -0.41,-0.87 -2.1,-0.15 -1.03,-0.56 -1.66,-0.28 -0.7,-0.54 -1.39,0.58 -0.18,0.44 0,0 -1.09,0.29 -0.69,-0.53 -1.16,-0.2 -0.29,-0.64 z"
                        title="Saitama"
                        id="JP-04" />
                    <path class="todouhuken"
                        d="m 319.14993,263.11889 0.14,-0.21 0.96,0.42 0.39,-0.47 -0.3,-0.72 0.09,-0.58 1.35,-0.38 -0.12,-0.51 0.28,-0.13 0.24,0.38 1.51,-2.16 0.57,0.45 0.23,-0.35 -0.54,-1.29 -0.76,-0.83 -1.21,-1.19 -0.69,0.29 -0.35,-0.76 0,0 -1.08,-2.26 0,0 0.34,-0.26 0.22,-1.33 -1.68,-3.22 -0.05,-1.04 -0.71,-1.41 0,0 0.42,0.03 0.33,0.84 1.63,2.01 0.72,0.24 0.2,0.71 1.04,0.7 2.46,0.86 0.58,0.72 1.02,-0.41 0.86,0.11 0.59,-0.4 0.8,0.23 0.86,-0.82 2.01,-0.52 1.08,0.52 0.91,-0.04 1.13,0.97 1.23,0.26 1.11,1.53 2.5,1.54 0,0 -0.11,0.65 -0.76,-0.51 -1.5,0.5 -0.8,-0.22 -0.75,0.19 -2.72,2.07 -1.39,1.57 -1.12,2.16 -0.29,2.32 0.47,1.23 -0.61,2.85 -0.67,0.14 -0.47,1.02 -0.28,0.1 -2.15,0.62 -0.23,-0.44 -1.28,0.19 -0.81,1.1 -1.97,1.36 -0.51,1.21 0.1,0.58 -0.45,0.61 -1.04,0.43 -1.17,-0.21 -0.19,-0.72 -1.31,-0.67 0.03,-0.29 0.8,0.11 1.25,-0.56 -0.78,-1.66 0.46,-0.5 -0.36,-0.36 0.29,-0.7 -0.41,-0.57 0.01,-0.83 0.92,-0.71 0.08,-0.52 -0.44,-0.75 0.06,-0.39 -0.75,-0.46 0.54,-1.46 z"
                        title="Chiba"
                        id="JP-05" />
                    <path class="todouhuken"
                        d="m 310.35993,279.40889 -0.68,-0.39 -0.14,-0.41 -0.06,-1.39 0.23,-0.5 1.22,0.43 0.52,0.92 -0.16,1.5 -0.93,-0.16 z m -2.11,6.15 -0.33,2.29 -0.49,-0.4 -0.06,-0.52 0.88,-1.37 z m -1.42,2.19 0.25,0.27 -0.61,0.2 0.36,-0.47 z m 12.32,-31.08 -0.82,-0.06 -0.2,-0.93 -0.5,0.44 -0.3,1.56 0.32,0.75 0.25,-0.15 0.44,0.71 -0.87,-0.2 -0.93,0.29 0,0 -0.01,-0.38 -0.48,-0.23 -0.33,-0.67 -2.68,-1.27 -0.76,0.91 -0.49,-0.47 -0.22,0.23 0.79,0.62 -0.19,2.02 -0.3,0.03 -1.35,-1.89 -2.15,-0.7 -0.86,0.16 -0.59,-0.99 -0.61,0.03 -0.46,-0.55 -0.6,-0.13 0,0 -2.1,-1.16 -1.58,-3.24 0,0 0.19,-0.44 1.38,-0.58 0.71,0.54 1.66,0.29 1.03,0.56 2.1,0.15 0.41,0.87 0.78,0.16 0.53,0.6 1.25,-0.04 1.59,-0.75 0.28,0.87 0.92,-0.37 0.55,0.29 0.67,-0.8 1.78,0.32 0.41,-0.75 0.45,0.28 0.52,-0.14 0.17,0.42 0.93,-0.07 0,0 1.08,2.26 0,0 0.35,0.76 -0.56,0.32 0.4,0.38 -0.83,0.57 -1.17,-0.43 z m -5.62,37.62 0.27,-0.46 -0.03,-0.53 -0.52,-0.53 -0.93,0.11 -0.4,1 0.18,0.63 0.69,0.09 0.74,-0.31 z m 4.5,23.31 0.97,0.6 0.15,-0.7 0.39,-0.09 -0.25,-0.91 -0.55,-0.05 -0.88,-0.9 -0.48,0.01 -0.16,0.72 0.28,0.56 0.42,0.13 0.11,0.63 z m 0,0 0.97,0.6 0.15,-0.7 0.39,-0.09 -0.25,-0.91 -0.55,-0.05 -0.88,-0.9 -0.48,0.01 -0.16,0.72 0.28,0.56 0.42,0.13 0.11,0.63 z"
                        title="Tokyo"
                        id="JP-06" />
                    <path class="todouhuken"
                        d="m 301.02993,262.33889 0.41,-1.13 1.79,-0.83 0.46,-0.65 0.71,-0.1 0.49,-0.52 0.34,-0.7 0.02,-2.61 0,0 0.6,0.13 0.46,0.55 0.61,-0.03 0.59,0.99 0.86,-0.16 2.17,0.71 1.35,1.89 0.3,-0.03 0.19,-2.02 -0.79,-0.62 0.22,-0.23 0.49,0.47 0.76,-0.91 2.68,1.27 0.33,0.67 0.48,0.23 0.01,0.38 0,0 0.64,-0.19 0,0 0.01,0 0,0 0.03,0 0,0 0.02,0 0,0 0.42,0.73 -1.49,0.78 -0.74,-0.06 -0.41,0.41 0.38,0.45 0.4,-0.12 0.4,0.29 -0.41,0.88 -0.35,-0.25 -0.47,0.08 -0.1,0.39 0.49,0.26 0.27,1.32 -0.34,0.7 0.96,0.78 1.07,0.23 -0.43,1.06 -0.71,0.09 -0.65,0.55 0.12,0.59 0.34,0.09 -0.04,0.43 -1.34,-0.03 0.15,-1.18 -0.33,-1.18 -0.63,-0.68 0.06,-0.63 -2.54,-0.62 -2.45,0.34 -2.12,0.66 -1.16,0.93 -0.17,2.09 -0.64,0.35 0,0 -1.52,-0.21 -0.13,-0.68 -0.7,-0.54 -0.24,-1.51 0.57,-0.63 0.27,-0.96 -0.34,-1.53 -0.15,-0.24 -1.53,0.01 z"
                        title="Kanagawa"
                        id="JP-07" />
                    <path class="todouhuken"
                        d="m 305.23993,255.79889 -0.02,2.61 -0.34,0.7 -0.49,0.52 -0.71,0.1 -0.46,0.65 -1.79,0.83 -0.4,1.13 0,0 -0.67,0.39 -0.7,-0.07 -0.37,0.27 -2.8,0.47 -0.45,-0.97 -1.03,0.12 -0.57,-1.26 -0.99,0.91 0.05,1.71 -0.43,0.61 0.4,2.66 -0.72,0.63 -1.24,-0.12 -0.69,-0.5 -0.69,-2.69 -0.76,-0.36 -0.76,0.52 -0.68,-0.51 -0.33,-1.3 0.46,-0.93 -0.23,-1.07 0.38,-1.18 -0.94,-3.18 0,0 -0.73,-1.77 1,-1.1 -0.88,-0.86 0.97,-1.97 0.2,-0.12 0.72,0.62 1.77,-2.71 1.43,0.58 -0.01,0.67 0.48,0.53 0.48,-0.09 0.22,-0.41 1.76,0.03 0.54,1.14 0.97,-0.01 0.73,-0.94 0.4,0.01 0,0 1.02,0.23 0.29,0.64 1.16,0.2 0.69,0.53 1.09,-0.29 0,0 1.57,3.24 z"
                        title="Yamanashi"
                        id="JP-08" />
                    <path class="todouhuken"
                        d="m 274.32993,265.08889 -0.01,-0.53 0.84,-0.65 -0.26,-1.27 0.87,-0.29 -0.71,-0.98 0.65,-0.7 0,-0.91 -0.57,-0.54 -1.07,0.32 -0.31,-0.55 0.07,-1.1 -0.39,-0.45 0.43,-1.28 -0.78,-0.7 -0.8,-1.79 -1.23,-0.37 -0.05,-0.51 -1.04,-0.01 -0.29,-0.39 0.11,-0.54 0.59,-0.25 0.35,-1.06 1.15,-0.35 0.33,0.33 0.42,-0.07 0.52,-1.06 0.44,-0.1 0.37,-0.92 1,-0.76 0.39,-1.57 -0.72,-0.25 -0.46,-0.5 0.01,-0.81 0.75,-0.71 0.05,-0.52 -0.38,-0.55 1.39,-1.81 0.09,-0.78 -0.09,-0.53 -1.03,-0.66 -0.13,-0.51 0,0 0.9,-0.86 0.42,-0.81 -0.02,-0.75 0.39,-0.53 0.61,-0.17 -0.12,-0.49 -0.21,0.04 0.11,-0.77 1.18,-0.7 0.2,-4.18 0,0 1.37,-1.05 0.78,-1.31 -0.08,-1.29 1.01,-0.09 1.86,0.39 0.37,0.56 -0.55,1.3 0.95,0.69 0.93,-1.06 1.24,-0.03 1.01,-0.65 0.85,0.06 0.29,0.62 0.24,-0.04 0.26,-1.65 1.19,-0.53 0.73,-1.57 2.57,-0.81 0.81,0.23 0.42,0.94 0.04,1.55 1.03,1.09 0.98,0.45 -0.14,0.73 0.23,0.45 -0.52,0.86 0.38,0.24 0.12,0.48 0,0 -1.55,0.83 -1.79,0.36 -0.01,1.09 -0.96,0.16 -0.96,1.18 0.02,0.99 -0.6,1.66 0.06,1.3 1.25,0.74 0.43,0.07 0.21,-0.31 0.88,0.25 0.44,-0.4 0.7,-0.1 0.83,0.25 0.29,1.15 -0.07,1.48 -1.03,0.68 0.23,1.11 0.42,0.44 -0.03,0.81 -0.45,0.48 -0.46,-0.33 -0.16,0.17 0.44,0.76 0.65,0.08 0.28,0.67 -0.33,0.35 0.38,1.77 0.61,0.19 0.36,0.52 0.36,-0.09 0,0 -0.1,0.46 0.52,1.05 -0.2,0.52 0,0 -0.4,-0.01 -0.73,0.94 -0.97,0.01 -0.54,-1.14 -1.76,-0.03 -0.22,0.41 -0.48,0.09 -0.48,-0.53 0.01,-0.67 -1.43,-0.58 -1.77,2.71 -0.72,-0.62 -0.2,0.12 -0.97,1.97 0.88,0.86 -1,1.1 0.73,1.77 0,0 -0.58,1.64 -0.36,-0.14 -0.56,0.65 0.33,0.26 -0.41,0.56 0.42,1.31 -0.74,0.26 0,0.67 0.53,0.67 -0.14,0.72 -1.65,0.63 -1.21,1.01 -1.28,0.64 -0.21,0.43 -0.51,0.01 -0.46,0.93 -1.07,0.11 0,0 -0.84,0.26 -0.22,-0.39 -1.55,-0.3 -0.86,0.56 -1.25,0.26 0,-0.51 -0.63,-0.81 z"
                        title="Nagano"
                        id="JP-09" />
                    <path class="todouhuken"
                        d="m 304.84993,274.99889 -1.07,2.05 -1.23,1.02 -0.48,1.26 0.29,0.76 -0.45,0.17 -0.48,-0.25 -0.41,0.19 -0.2,0.52 -1.26,0.74 -0.38,-0.14 -1.08,-1.02 0.23,-0.29 -0.14,-0.37 -0.73,-0.33 0.01,-0.81 0.74,-0.73 -0.48,-1.08 0.27,-0.2 -0.2,-1.79 0.67,-0.61 -0.54,-1.53 0.49,-1.23 2.05,0.16 0.27,-0.71 -1.78,-1.59 -2.32,-0.51 -2.74,0.82 -0.9,1.57 0.4,0.5 -0.22,0.6 -3.07,1.66 -0.8,1.34 0.18,1 -0.69,1.23 -1.52,1.15 -0.54,1.37 0.01,0.72 0.75,0.71 -0.09,0.22 -4.47,-1.58 -2.06,-0.07 -1.84,0.45 -2.66,-0.61 -3.56,-0.07 0,0 -0.16,-2.32 0.43,-1.23 2.75,-1.54 1.28,-1.92 0.03,-1.06 1.46,-2 0.47,-0.24 -0.08,-0.47 0.57,-0.58 -0.51,-0.5 0.31,-0.98 0,0 1.07,-0.11 0.46,-0.93 0.51,-0.01 0.21,-0.43 1.28,-0.64 1.21,-1.01 1.65,-0.63 0.14,-0.72 -0.53,-0.67 0,-0.67 0.74,-0.26 -0.42,-1.31 0.41,-0.56 -0.33,-0.26 0.56,-0.65 0.36,0.14 0.58,-1.64 0,0 0.94,3.18 -0.38,1.18 0.23,1.07 -0.46,0.93 0.33,1.3 0.68,0.51 0.76,-0.52 0.76,0.36 0.69,2.69 0.69,0.5 1.24,0.12 0.72,-0.63 -0.4,-2.66 0.43,-0.61 -0.05,-1.71 0.99,-0.91 0.57,1.26 1.03,-0.12 0.45,0.97 2.8,-0.47 0.37,-0.27 0.7,0.07 0.67,-0.39 0,0 1.51,-0.03 0.15,0.24 0.35,1.52 -0.28,0.97 -0.57,0.62 0.24,1.52 0.7,0.54 0.13,0.68 1.52,0.21 0,0 -0.67,0.97 -0.14,1.01 0.63,0.25 -0.13,1.33 1.03,0.83 -0.11,1.53 z"
                        title="Shizuoka"
                        id="JP-10" />
                    </svg>
                </div>
            </div> 
            <div class="Button">
                <a href="" class="btn btn--start btn--circle">始める</a>
                <a href="" class="btn btn--reset btn--circle">リセット</a>
                <a href="" class="btn btn--solve btn--circle">自動で解決する</a>
            </div>
        </div>

    </main>
    <footer>
        <a href=""></a>
    </footer>

    <script>
        // 都道府県のリスト（例）
        const prefectures = ['ibaraki', 'tochigi', 'gunma', 'saitama', 'chiba', 'tokyo', 'kanagawa', 'yamanashi', 'nagano', 'shizuoka'];

        // 隣接行列の作成（例）
        const adjacencyMatrix = [
          // 1, 2, 3, 4, 5, 6, 7, 8, 9, 10
            [1, 1, 0, 1, 1, 0, 0, 0, 0, 0],//1
            [1, 1, 1, 1, 0, 0, 0, 0, 0, 0],//2
            [0, 1, 1, 1, 0, 0, 0, 0, 1, 0],//3
            [1, 1, 1, 1, 1, 1, 0, 1, 1, 0],//4
            [1, 0, 0, 1, 1, 1, 0, 0, 0, 0],//5
            [0, 0, 0, 1, 1, 1, 1, 1, 0, 0],//6
            [0, 0, 0, 0, 0, 1, 1, 1, 0, 1],//7
            [0, 0, 0, 1, 0, 1, 1, 1, 1, 1],//8
            [0, 0, 1, 1, 0, 0, 0, 1, 1, 1],//9
            [0, 0, 0, 0, 0, 0, 1, 1, 1, 1]//10
        ];

        // ライトの状態（0:オフ, 1:オン）
        let lightStates = new Array(prefectures.length).fill(0);
    
        // タイマーIDとカウントダウン変数を保持する変数
        let timerId = null;
        let countdown = 100;
        let gameStarted = false; // ゲームが開始されたかどうかを示すフラグ
    
        // クリック時の処理
        document.addEventListener("DOMContentLoaded", () => {
            const prefectureElements = document.querySelectorAll("path");
    
            prefectureElements.forEach((element, index) => {
                element.addEventListener("click", () => {
                    if (gameStarted) {
                        toggleLight(index);
                        checkGameStatus();
                    }
                });
            });
    
            // "始める"ボタンのクリックイベントリスナーを追加
            document.querySelector(".btn--start").addEventListener("click", (event) => {
                event.preventDefault(); // デフォルトのリンク動作を無効化
                startGame();
            });
    
            // "リセット"ボタンのクリックイベントリスナーを追加
            document.querySelector(".btn--reset").addEventListener("click", (event) => {
                event.preventDefault(); // デフォルトのリンク動作を無効化
                resetGame();
            });
    
            // "自動で解決する"ボタンのクリックイベントリスナーを追加
            document.querySelector(".btn--solve").addEventListener("click", (event) => {
                event.preventDefault(); // デフォルトのリンク動作を無効化
                solveLights();
            });
    
            updateMap();
        });
    
        function toggleLight(index) {
            // 自分自身と隣接する都道府県の状態を反転
            for (let i = 0; i < prefectures.length; i++) {
                if (adjacencyMatrix[index][i] === 1 || i === index) {
                    lightStates[i] = 1 - lightStates[i];
                }
            }
    
            // 状態の更新
            updateMap();
        }
    
        // 地図の状態を更新する関数
        function updateMap() {
            const prefectureElements = document.querySelectorAll("path");
    
            prefectureElements.forEach((element, index) => {
                if (lightStates[index] === 1) {
                    element.classList.remove("inactive");
                    element.classList.add("active");
                } else {
                    element.classList.remove("active");
                    element.classList.add("inactive");
                }
            });
        }
    
        // ライトの状態をランダムに設定する関数
        function randomizeLights() {
            lightStates = lightStates.map(() => Math.floor(Math.random() * 2));
            updateMap();
        }
    
        // ゲームを開始する関数
        function startGame() {
            randomizeLights();
            countdown = 100; // カウントダウンの初期値を設定
            document.getElementById("countdown").textContent = countdown;
            startTimer();
            gameStarted = true; // ゲーム開始フラグを立てる
        }
    
        // ゲームをリセットする関数
        function resetGame() {
            lightStates.fill(0);
            updateMap();
            stopTimer();
            countdown = 100;
            document.getElementById("countdown").textContent = countdown;
            gameStarted = false; // ゲーム開始フラグをリセット
        }
    
        // タイマーを開始する関数
        function startTimer() {
            if (timerId === null) {
                timerId = setInterval(() => {
                    countdown--;
                    document.getElementById("countdown").textContent = countdown;
                    if (countdown <= 0) {
                        stopTimer();
                        checkGameStatus(true);
                    }
                }, 1000); // 1秒ごとにカウントダウン
            }
        }
    
        // タイマーを停止する関数
        function stopTimer() {
            if (timerId !== null) {
                clearInterval(timerId);
                timerId = null;
            }
        }
    
        // ゲームの状態をチェックする関数a
        function checkGameStatus(timeUp = false) {
            if (lightStates.every(state => state === 0)) {
                stopTimer();
                gameStarted = false; // ゲーム開始フラグをリセット
                alert("クリア！おめでとうございます！");
            } else if (timeUp) {
                gameStarted = false; // ゲーム開始フラグをリセット
                alert("ゲームオーバー！時間切れです！");
            }
        }
    
        // ライトの状態を自動で解決する関数（仮）
        function solveLights() {
            // 解決アルゴリズムをここに追加
            alert("自動で解決する機能は未実装です");
        }
    
        updateMap();
    </script>
    
</body>
</html>
